<section class="content-header">
  <h1>Contacts<small>list all contacts</small></h1>

  <button 
    type="button" 
    class="btn btn-block btn-info btn-lg" 
    style="width: 200px;float: right;margin-bottom: 15px;" 
    onclick="location.href='<%= new_contact_path %>'">Add Contact
  </button>

</section>

<section class="content">
  <div class="row">
    <div class="col-xs-12">
      <div class="box">
        <div class="box-header">
          <h3 class="box-title">all contacts</h3>
        </div>
        <div class="box-body">
          <div class="dataTables_wrapper form-inline dt-bootstrap">
            <div class="row"><div class="col-sm-12">
                <table class="table table-striped dataTable" role="grid">
                  <thead>
                    <tr role="row">
                      <th>id</th>
                      <th>email</th>
                      <th>unread</th>
                      <th style="max-width: 50px;">operations</th>
                    </tr>
                  </thead>

                  <tbody>
                    <% @contacts.each_with_index do |c,index| %>
                      <tr role="row" class="<%= index.odd? ? "odd" : "even" %>">
                        <td><%= c&.contacter %></td>
                        <td><%= c&.user&.email %></td>
                        <td><%= current_user.unread_messages %></td>
                        <td style="width: 200px;">
                          <%= link_to '消息', contact_messages_path(c.id), class:"btn btn-primary" %> 
                          <%= link_to '删除', contact_path(c.id), class:"btn btn-danger", method: :delete, data: { confirm: 'Are you sure?' }%> 
                        </td>
                      </tr>
                    <% end %>
                  </tbody>
                </table>
            </div></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
